<!DOCTYPE html>
<html>
  <head>
    <title>Multi-Headed Drupal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- jQuery + history plugin -->
    <script type="text/javascript" src="src/jquery.min.js"></script>
    <script type="text/javascript" src="src/jquery.history.js"></script>

    <!-- Slippy core js file -->
    <script type="text/javascript" src="src/slippy.js"></script>

    <!-- Slippy structural styles -->
    <link type="text/css" rel="stylesheet" href="src/slippy.css"/>

    <!-- Slippy theme (feel free to change it) -->
    <link type="text/css" rel="stylesheet" href="src/slippy-pure.css"/>

    <!-- Specific styles for this presentation -->
    <link type="text/css" rel="stylesheet" href="multihead.css"/>

    <!-- Syntax highlighting core file  -->
    <script type="text/javascript" src="src/highlighter/shCore.js"></script>

    <!-- Syntax highlighting brushes, this one is only for javascript -->
    <script type="text/javascript" src="src/highlighter/shBrushPhp.js"></script>
    <script type="text/javascript" src="src/highlighter/shBrushPlain.js"></script>
    <script type="text/javascript" src="src/highlighter/shBrushJScript.js"></script>

    <!-- Syntax highlighting core CSS and a theme -->
    <link type="text/css" rel="stylesheet" href="src/highlighter/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="src/highlighter/shThemeEclipse.css"/>

    <script type="text/javascript">
      $(function() {
          $(".slide").slippy({
            animLen: 0,
            margin: 0.05
          });
          SyntaxHighlighter.all();
      });
    </script>

  </head>
  <body>

<section class="slide" id="session-title" data-background="images/first-slide.png">
  <div style="background-color: wheat; margin-top: 60%; padding: 0.25em;">
    <h1 style="">Multi-Headed Drupal</h1>
    <h2>by Larry Garfield</h2>
    <h2>Thursday 23 August 2012</h2>
  </div>
</section>

<div class="footer">
  <span class="right"><a href="http://www.garfieldtech.com/">http://www.garfieldtech.com/</a></span>
  <span style="text-align: center">DrupalCon Munich 2012</span>
  <span class="left"><a href="http://munich2012.drupal.org/">http://munich2012.drupal.org/</a></span>
  <hr class="defloat" />
</div>

<section class="slide">
  <h1>@Crell</h1>
  <div style="width: 50%; float: right; ">
    <img style="max-width: 100%; height: auto;" src="images/crell-nerf.jpg" />
  </div>

  <ul>
    <li>Senior Architect, Palantir.net</li>
    <li>Drupal Association Advisor</li>
    <li>Web Services & Context Initiative Owner</li>
    <li>Co-Author,<br /><em>Drupal 7 Module Development</em>,<br />Packt Publishing</li>
    <li>Architectural Gadfly</li>
    <li>Nerf Gunslinger</li>
  </ul>

  <img style="margin-top: 2em;" src="images/palantir.png" />
</section>

<section class="slide">
  <h1>What we do</h1>
  <img style="position: absolute; top: 30px; left: -100px;" src="images/sites/barnard-1.jpg" />
  <img style="position: absolute; top: 60px; left: -70px;" class="incremental" src="images/sites/foreign-affairs-1.jpg" />
  <img style="position: absolute; top: 90px; left: -40px;" class="incremental" src="images/sites/fieldmuseum-1.jpg" />
  <img style="position: absolute; top: 120px; left: -10px;" class="incremental" src="images/sites/opensource-1.jpg" />
  <img style="position: absolute; top: 150px; left: 20px;" class="incremental" src="images/sites/marketplace-1.jpg" />
</section>

<section class="slide">
  <h1>Multi-Headed Drupal</h1>
  <div class="vcenter" style="text-align: center;">
    <img style="width: 50%" src="images/pnet-multi-head-illo.jpg"  />
  </div>
</section>

<section class="slide">
  <h1>Case study</h1>
  <h2>Drupal University</h2>
  <ul>
    <li class="incremental">3[0] Colleges</li>
    <li class="incremental">4[0] Departments each</li>
    <li class="incremental">Over-worked IT department wants to keep things simple and centralized</li>
    <li class="incremental">Departments want to be special snowflakes</li>
  </ul>
  <h2 class="incremental" style="margin-top: 2em;">I hate my life...</h2>
</section>

<section class="slide">
  <div class="vcenter">
    <h2>How do we do that?</h2>
    <h2>Let us count the ways...</h2>
  </div>
</section>


<section class="slide">
  <div class="vcenter">
    <h2>The purpose of this session is to confuse you with options, then unconfuse you with guidelines</h2>
  </div>
</section>

<section class="slide">
    <h1>Not rules, more like guidelines</h1>
    <div class="vcenter" style="text-align: center;">
      <img style="width: 40%;" src="images/barbosa.gif" data-credit="http://www.killerfilm.com/articles-2/read/captain-barbados-confirmed-for-pirates-4-14377" />
    </div>
</section>


<section class="slide">
  <h1 class="vcenter">Separate sites</h1>
</section>

<section class="slide">
  <h1>Separate sites</h1>
  <ul>
    <li class="incremental">Never mind, KISS</li>
    <li class="incremental">Give everyone their own Drupal</li>
    <li class="incremental"></li>
    <li class="incremental"></li>
  </ul>
</section>

<section class="slide">
  <h1>Separate sites</h1>
  <div class="incremental" style="float: left; width: 50%;">
    <h2>Benefits</h2>
    <ul>
      <li class="incremental">Standard platform</li>
      <li class="incremental">No added complexity</li>
      <li class="incremental">Complete freedom for each implementation</li>
      <li class="incremental">Mixed Drupal versions</li>
    </ul>
  </div>
  <div class="incremental" style="float: right; width: 50%;">
    <h2>Drawbacks</h2>
    <ul>
      <li class="incremental">No economy of scale</li>
      <li class="incremental">No (intrinsic) standardization</li>
      <li class="incremental">Many sites to have to manage</li>
      <li class="incremental"></li>
    </ul>
  </div>

  <div style="clear: all">
  </div>
</section>

<section class="slide">
  <h1>Features</h1>
  <ul>
    <li class="incremental">Dump configuration to code</li>
    <li class="incremental">Packages of functionality</li>
    <li class="incremental">Easily distributable</li>
  </ul>
</section>

<section class="slide">
  <h1>Install profiles</h1>
  <ul>
    <li class="incremental">All the power of a module...</li>
    <li class="incremental">... plus install wizards</li>
    <li class="incremental"></li>
  </ul>
</section>

<section class="slide">
  <div class="vcenter">
    <h1>Install profiles</h1>
    <h1>+</h1>
    <h1>Features</h1>
    <h1>=</h1>
    <h1 class="incremental"><em>Distributions</em></h1>
  </div>
</section>


<section class="slide">
  <h1>Distributions</h1>
  <ul>
    <li class="incremental">A web application built with Drupal</li>
    <li class="incremental">Examples:
      <ul>
        <li class="incremental">Open Atrium</li>
        <li class="incremental">Managing News</li>
        <li class="incremental">Drupal Commons</li>
        <li class="incremental">OpenScholar</li>
        <li class="incremental">Conference Organizing Distribution (COD)</li>
        <li class="incremental">Open Academy</li>
        <li class="incremental"><em>Your custom distribution here</em></li>
      </ul>
    </li>
    <li class="incremental"><a href="http://drupal.org/projects/profiles">Many many more...</a></li>
  </ul>
</section>

<section class="slide">
  <h1>Example: Field Microsites</h1>
  <ul>
    <li class="incremental">Install profile for major exhibitions</li>
    <li class="incremental">80% of a site in-a-box
      <ul>
        <li class="incremental">10 content types</li>
        <li class="incremental">Media, WYSIWYG, text formats, user roles etc.</li>
        <li class="incremental">Common navigation</li>
      </ul>
    </li>
  </ul>
  <a href="http://www.palantir.net/blog/using-drupal-7-create-microsites"><img class="casestudy" src="images/fieldmuseum-horse.jpg"  /></a>
</section>

<section class="slide">
  <h1>Multi-site</h1>
  <img class="vcenter" src="images/multisite.png"  />
</section>

<section class="slide">
  <h1>Multi-site</h1>
  <ul>
    <li class="incremental">Drupal feature since at least 4.5</li>
    <li class="incremental">One code base, many sites</li>
    <li class="incremental">"Separate sites with shared code"</li>
  </ul>
  <img src="images/multisite-files.png"  />
</section>

<section class="slide">
  <h1>Multi-site</h1>
  <h3>sites.php</h3>
  <pre class="brush:php">
    $sites['www.drupal.edu'] = 'main';

    $sites['fapi.api.drupal.edu'] = 'fapi';

    $sites['multisite.building.drupal.edu'] = 'multisite';

    $sites['fundraising.drupalassociation.com'] = 'da_fundraising';
  </pre>
  <img src="images/multisite-sites.png"  />
</section>

<section class="slide">
  <h1>Multi-site</h1>
  <div class="incremental" style="float: left; width: 50%;">
    <h2>Benefits</h2>
    <ul>
      <li class="incremental"><em>Same as Separate Sites, plus...</em></li>
      <li class="incremental">One codebase to update</li>
      <li class="incremental">Lower memory overhead (APC)</li>
    </ul>
  </div>
  <div class="incremental" style="float: right; width: 50%;">
    <h2>Drawbacks</h2>
    <ul>
      <li class="incremental"><em>Same as Separate Sites, plus...</em></li>
      <li class="incremental">Only one core version</li>
      <li class="incremental">Multiple module versions are hard</li>
    </ul>
  </div>

  <div style="clear: all">
  </div>
</section>

<section class="slide">
  <div class="vcenter">
    <h1 style="text-align: left;">If you have one server admin team...</h1>
    <h2 class="incremental" style="text-align: right;">... use Multi-site</h2>
    <h1 class="incremental" style="text-align: left;">If you have many server admin teams...</h1>
    <h2 class="incremental" style="text-align: right;">... use Separate sites</h2>
  </div>
</section>

<section class="slide">
  <h1>Example: Washington University St. Louis</h1>
  <ul>
    <li class="incremental">Drupal 6, Pre-features</li>
    <li class="incremental">Partially built database dump</li>
    <li class="incremental">4 themes to choose from</li>
    <li class="incremental">Clone DB, flush cache, create settings.php, customize</li>
  </ul>
  <a class="casestudy" href="http://www.palantir.net/experience/washington-university-st-louis"><img src="images/wustl.jpg"  /></a>
</section>

<section class="slide">
  <h1>Domain Access</h1>
  <img class="vcenter" src="images/domainaccess.png"  />
</section>

<div style="display: none">
  Talk about Domain Access.  Needs screen shots.  (Oh fuck...)
  Example: Environment America (aka PIN, link to acquia's writeup)
</div>

<section class="slide">
  <h1>Organic Groups</h1>
  <img class="vcenter" src="images/organicgroups.png"  />
</section>

<div style="display: none">
  Talk about Organic Groups.
  Example: Can't talk about it, but CSUN.
</div>

<section class="slide">
  <h1 class="vcenter">Single-site</h1>
</section>

<section class="slide">
  <div class="vcenter">
    <h1>Just because it's different sites now doesn't mean it has to be</h1>
    <h1 class="incremental">Just because you call it a "site" doesn't mean it is</h1>
  </div>
</section>

<section class="slide">
  <div class="vcenter">
    <h1>What does "site" mean?</h1>
  </div>
</section>

<section class="slide">
  <h1>What does "site" mean?</h1>
  <ul>
    <li class="incremental">A presence on the web</li>
    <li class="incremental">An organization's home page</li>
    <li class="incremental">A path root</li>
    <li class="incremental">"What I have access to"</li>
  </ul>
</section>

<section class="slide">
  <h1>Access control: Workbench Access</h1>
  <ul>
    <li class="incremental">Divide site into administrative sections</li>
    <li class="incremental">Sections != path (unless you want it to be)</li>
    <li class="incremental">Assign roles or users to sections</li>
    <li class="incremental">Affects edit, not view</li>
  </ul>
</section>

<section class="slide">
  <h1>Variable themes: Options</h1>
  <ul>
    <li class="incremental">Sections module (D6, needs port)</li>
    <li class="incremental">Panels</li>
    <li class="incremental">Panels Everywhere</li>
    <li class="incremental"><a href="http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_custom_theme/7"><code>hook_custom_theme()</code></a></li>
    <li class="incremental">... Or just don't</li>
  </ul>
</section>

<section class="slide">
  <h1>Single-site</h1>
  <div class="incremental" style="float: left; width: 50%;">
    <h2>Benefits</h2>
    <ul>
      <li class="incremental">No/little mental overhead</li>
      <li class="incremental">One code base to manage</li>
      <li class="incremental">Easy on the server admin and site-admin</li>
    </ul>
  </div>
  <div class="incremental" style="float: right; width: 50%;">
    <h2>Drawbacks</h2>
    <ul>
      <li class="incremental">Limited variability between "sites"</li>
      <li class="incremental">Public understands only a single "site"</li>
      <li class="incremental">Single navigation hierarchy</li>
    </ul>
  </div>

  <div style="clear: all">
  </div>
</section>


<section class="slide">
  <h1>Example: </h1>
  <ul>
    <li class="incremental"></li>
    <li class="incremental"></li>
    <li class="incremental"></li>
    <li class="incremental"></li>
  </ul>
  <img class="casestudy" src="images/uclaw.jpg"  />
</section>


<div style="display: none">
  Talk about Single site: Workbench Access, Panels Everywhere.
  Example, UC Law
</div>

<div style="display: none">
  Talk about trade-offs.
</div>

<section class="slide">
  <h1>Decisions, decisions...</h1>

  <table class="visible" style="width: 100%; border: 1px solid black;">
    <thead>
      <tr><th>If you want...</th> <th>Probably means...</th></tr>
    </thead>
    <tbody>
      <tr class="incremental"><td>Multiple core versions</td> <td class="incremental">Separate installs</td></tr>
      <tr class="incremental"><td>Different content types</td> <td class="incremental">Separate installs, multi-site</td></tr>
      <tr class="incremental"><td>Single user base</td> <td class="incremental">Domain Access, OG, Single-site</td></tr>
      <tr class="incremental"><td>Subdomains</td> <td class="incremental">Separate installs, multi-site, Domain Access</td></tr>
      <tr class="incremental"><td>One domain</td> <td class="incremental">OG, Single-site</td></tr>
      <tr class="incremental"><td>Simplified server administration</td> <td class="incremental">Domain Access, OG, Single-site</td></tr>
      <tr class="incremental"><td>Shared content</td> <td class="incremental">Domain Access, OG, Single-site</td></tr>
      <tr class="incremental"><td>Per-department ACL</td> <td class="incremental">Single-site, OG</td></tr>
      <tr class="incremental"><td>Department autonomy</td> <td class="incremental">Separate installs, multi-site (maybe OG)</td></tr>
      <tr class="incremental"><td>Per-department Views</td> <td class="incremental">Separate installs, multi-site (maybe OG)</td></tr>
      <tr class="incremental"><td>Staggered migration</td> <td class="incremental">Separate installs, multi-site, Domain Access, proxy server shenanigans</td></tr>
      <tr class="incremental"><td>Per department theme</td> <td class="incremental">Separate installs, Multi-site, Domain Access, OG</td></tr>
      <tr class="incremental"><td>Inexperienced site admins</td> <td class="incremental">Separate installs, Single-site</td></tr>
    </tbody>
  </table>
</section>

<section class="slide">
    <h1>Remember what we said about guidelines</h1>
    <div class="vcenter" style="text-align: center;">
      <img style="width: 40%;" src="images/barbosa.gif" data-credit="http://www.killerfilm.com/articles-2/read/captain-barbados-confirmed-for-pirates-4-14377" />
    </div>
</section>

<section class="slide">
  <h1>Mix and Match</h1>
  <img class="vcenter" src="images/multisite-domainaccess.png"  />
</section>

<section class="slide">
  <h1>Multi-site can host any combination of sites</h1>
  <ul>
    <li class="incremental">Multi-site / OG</li>
    <li class="incremental">Multi-site / Domain Access</li>
    <li class="incremental">Multi-site / Workbench Access</li>
    <li class="incremental">Multi-site / Domain Access / OG</li>
  </ul>
</section>

<section class="slide">
  <h1>Example: Barnard College</h1>
  <ul>
    <li class="incremental">50 departments and programs</li>
    <li class="incremental">One site with Domain Access</li>
    <li class="incremental">... and Workbench Access for even finer control</li>
  </ul>
  <a href="http://www.palantir.net/experience/barnard-college"><img class="casestudy" src="images/barnard.jpg"  /></a>
</section>







<section class="slide" data-background="images/last-slide.png">
  <div class="vcenter" style="background-color: wheat;">
    <h1>What did you think?</h1>
    <h2 style="margin-top: 1em;">Locate this session on the DrupalCon Munich website</h2>
    <h3 style="margin-top: 1em; text-align: center;"><a href="http://munich2012.drupal.org/program/sessions/multi-headed-drupal">http://munich2012.drupal.org/program/sessions/multi-headed-drupal</a></h3>
    <h2 style="margin-top: 1em;">Thank you!</h2>
  </div>
</section>

  </body>
</html>
